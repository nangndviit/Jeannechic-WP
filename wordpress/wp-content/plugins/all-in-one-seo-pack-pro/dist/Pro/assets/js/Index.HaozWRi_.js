import{e as I}from"./regex.C2CBDGQi.js";import{a as M,x as W,A as J,L,h as Y,e as D,o as O,c as Q,y as pt}from"./links.D18SrdNe.js";import{W as H}from"./WpTable.yjBoG_Qq.js";import{C as x}from"./Tooltip.Gayc6MvE.js";import{C as q}from"./Table.DPPHow5O.js";import{a as N,b as ht,c as gt}from"./Affiliate.CZtLUjwg.js";import{S as F}from"./index.BWln78-O.js";import{x as d,o as l,l as y,m as f,a as r,G as $,C as c,t as u,D as S,c as h,d as g,q as ct,H as C,F as X,K as j,v as kt}from"./vue.esm-bundler.DqIKZLqK.js";import{_ as T}from"./_plugin-vue_export-helper.BN1snXvA.js";import{P as G}from"./PostTypes.Cef6XkQ_.js";import{S as tt}from"./Suggestion.DZXjrRRX.js";import{_ as R}from"./default-i18n.Bd0Z306Z.js";import{S as mt,a as st,f as ft,C as et}from"./Caret.CE8P-qnG.js";import{C as bt}from"./Tabs.jOaaGWf1.js";import{C as wt}from"./Index.Dd1ElObi.js";import{B as _t}from"./Editor.DDwyDEN5.js";import{T as ot}from"./Slide.Qz9BWVTI.js";import{S as nt}from"./Plus.D1ndwb34.js";const vt=()=>{let s=M().currentPost.postStatus;return W()&&(s=window.wp.data.select("core/editor").getCurrentPostAttribute("status")),s},go={methods:{filteredSuggestionsOutbound(t){const s=t.links.suggestionsOutbound.rows,o=[];return s.forEach(i=>{this.editorIsSuggestionAlreadyAdded(i)||o.push(i)}),o},editorIsSuggestionAlreadyAdded(t){return W()?this.blockEditorIsSuggestionAlreadyAdded(t):J()?this.classicEditorIsSuggestionAlreadyAdded(t):!1},blockEditorIsSuggestionAlreadyAdded(t){const s=window.wp.data.select("core/block-editor").getBlocks();return s?this.doesBlockHaveLink(s,t):!1},doesBlockHaveLink(t,s){let o=!1;return t.forEach(i=>{o||!i.attributes||s.suggestions.forEach(e=>{const n=I(e.context.permalink.trim()),k=new RegExp(`(<a href="${n}"[^<>]*>)(.*)(</a[^<>]*>)`,"i");if(i.attributes.content&&i.attributes.content.search(k)!==-1){o=!0;return}if(!i.innerBlocks)return;this.doesBlockHaveLink(i.innerBlocks,s)&&(o=!0)})}),o},classicEditorIsSuggestionAlreadyAdded(t){let s="",o=null,i=null;if(document.querySelector("#wp-content-wrap.tmce-active")?(o=window.tinyMCE.get("content"),s=o.getContent({format:"raw"})):(i=document.querySelector("textarea#content"),s=i?i.value:""),!s)return!1;let e=!1;return t.suggestions.forEach(n=>{const k=I(n.context.permalink.trim()),m=new RegExp(`(<a href="${k}"[^<>]*>)(.*)(</a[^<>]*>)`,"i");s.search(m)!==-1&&(e=!0)}),e}}},B="all-in-one-seo-pack",V=()=>{const t={frontPage:R("Front Page",B),deleteLink:R("Delete Link",B)},s={areYouSureSingle:R("Are you sure you want to delete this link?",B),areYouSureMultiple:R("Are you sure you want to delete these links?",B),areYouSureAll:R("Are you sure you want to delete all links?",B),actionCannotBeUndone:R("This action cannot be undone.",B),yesSingle:R("Yes, I want to delete this link",B),yesMultiple:R("Yes, I want to delete these links",B),yesAll:R("Yes, I want to delete all links",B),noChangedMind:R("No, I changed my mind",B)};return{bulkOptions:[{label:R("Delete",B),value:"delete"}],modalStrings:s,strings:t}},it={methods:{findTargetBlock(t,s){const o=I(s);let i=null;return t.forEach(e=>{if(i||!e.attributes)return;if(e.attributes.content&&e.attributes.content.search(o)!==-1){i=e.clientId;return}if(!e.innerBlocks)return;const n=this.findTargetBlock(e.innerBlocks,s);n&&(i=n)}),i}}},K={emits:["updatingLinks","linksUpdated"],mixins:[it],props:{post:{type:Object,required:!0},postIndex:{type:Number,required:!1},postId:{type:Number,required:!1},linksReport:{type:Boolean,default(){return!1}},postReport:{type:Boolean,default(){return!1}},metabox:{type:Boolean,default(){return!1}}},beforeMount(){window.aioseoBus.$on("updatingLinks",s=>{this.wpTableLoading=s});const t=L();this.pageNumber=this.linkType?t.postReport[this.linkType].totals.page:1},data(){return{changeItemsPerPageSlug:"linkAssistantPostsReport",action:"",showModal:!1,selectedRows:[]}},computed:{rows(){if(!this.metabox)return this.post.links[this.linkType].rows;const t=this.pageNumber===1?0:(this.pageNumber-1)*10;return this.post.links[this.linkType].rows.slice(t,t+10)}},methods:{fetchData(t){const s=M();window.aioseoBus.$emit("updatingLinks",!0);const o={...t,additionalFilters:{postId:this.post.ID||s.currentPost.id,postIndex:this.postIndex,type:this.linkType}},i=L(),e=this.postReport?"fetchPostReport":"fetchLinksReportInner";return i[e](o).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})},openPostReport(t){window.location.href=`#/post-report?postId=${this.postId}&postIndex=${this.postIndex}&initialTab=${t}`},maybeDoBulkAction({action:t,selectedRows:s}){!s.length||!t||(this.action=t,this.selectedRows=s,this.showModal=!0)},doBulkAction(){if(this.showModal=!1,this.selectedRows===!1||typeof this.selectedRows>"u"||!this.selectedRows.length)return;if(typeof this.selectedRows=="number"){this.doDeleteLink(this.selectedRows);return}if(this.metabox&&this.linkType!=="inboundInternal"){this.idsToIndexes(this.selectedRows).forEach(i=>{this.editorRemoveLink(i)});return}window.aioseoBus.$emit("updatingLinks",!0);const t=L(),s=M();t.linksBulk({postIndex:this.postIndex,postId:this.post.ID||s.currentPost.id,action:this.action,linkType:this.linkType,linkIds:this.selectedRows,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},doDeleteLink(t){const s=this.post.links[this.linkType].rows[t].id;if(!s)return;if(this.metabox&&this.linkType!=="inboundInternal"){this.editorRemoveLink(t);return}window.aioseoBus.$emit("updatingLinks",!0);const o=L(),i=M();o.linkDelete({postIndex:this.postIndex,postId:this.post.ID||i.currentPost.id,linkId:s,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},editorRemoveLink(t){W()&&(window.aioseoBus.$emit("updatingLinks",!1),this.blockEditorRemoveLink(t),window.aioseoBus.$emit("updatingLinks",!1)),J()&&this.classicEditorRemoveLink(t)},blockEditorRemoveLink(t){const o=M().currentPost.linkAssistant.links[this.linkType].rows[t];if(!o)return;window.aioseoBus.$emit("updatingLinks",!0);const i=I(o.anchor.trim()),e=o.phrase_html.trim(),n=I(e),k=window.wp.data.select("core/block-editor").getBlocks(),m=this.findTargetBlock(k,e);if(!m){window.aioseoBus.$emit("updatingLinks",!1);return}const _=window.wp.data.select("core/block-editor").getBlock(m);if(!_){window.aioseoBus.$emit("updatingLinks",!1);return}let w=new RegExp(`(<t?a[^<>]*>)(.*)?(${i})(.*)?(</t?a[^<>]*>)`,"i");const b=e.replace(w,"$2$3$4");w=new RegExp(`${n}`,"i"),window.wp.data.dispatch("core/block-editor").updateBlockAttributes(m,{content:_.attributes.content.replace(w,b)}).then(()=>{this.post.links[this.linkType].rows.splice(t,1)}).catch(P=>{console.error(`Couldn	 delete link with type "${this.linkType}" and index ${t}:`,P)}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated")})},classicEditorRemoveLink(t){var p;const o=M().currentPost.linkAssistant.links[this.linkType].rows[t];if(!o||!window.tinyMCE)return;window.aioseoBus.$emit("updatingLinks",!0);let i="",e=null,n=null;if(document.querySelector("#wp-content-wrap.tmce-active")?(e=window.tinyMCE.get("content"),i=e.getContent({format:"raw"})):(n=document.querySelector("textarea#content"),i=n?n.value:""),!i){window.aioseoBus.$emit("updatingLinks",!1);return}let k=o.phrase_html.trim();e||(k=k.replace(/(\sdata-mce-href=".*")/gi,""));const m=I(o.anchor.trim());let _=new RegExp(`(<t?a[^<>]*>)(.*)?(${m})(.*)?(</t?a[^<>]*>)`,"i");const w=k.replace(_,"$2$3$4"),b=I(k);_=new RegExp(`${b}`,"i"),i=i.replace(_,w),e?e.setContent(i):n.value=i,this.post.links[this.linkType].rows.splice(t,1),(p=L().postSettingsUpdate({postContent:i}))==null||p.finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated")})},idsToIndexes(t){let s,o=[];return Array.isArray(t)&&(s=t.map(Number)),s&&this.post.links[this.linkType].rows.forEach((i,e)=>{s.includes(i.id)&&o.push(e)}),t==="all"&&(o=this.post.links[this.linkType].rows.map((i,e)=>e)),o.sort(function(i,e){return e-i})}}},Pt={emits:["closeModal","doBulkAction"],components:{CoreModal:wt,SvgClose:mt},props:{selectedRows:{required:!0},strings:{type:Object,required:!0},show:Boolean},computed:{areYouSure(){return this.selectedRows==="all"?this.strings.areYouSureAll:Array.isArray(this.selectedRows)&&1<this.selectedRows.length?this.strings.areYouSureMultiple:this.strings.areYouSureSingle},confirmation(){return this.selectedRows==="all"?this.strings.yesAll:Array.isArray(this.selectedRows)&&1<this.selectedRows.length?this.strings.yesMultiple:this.strings.yesSingle}}},yt={class:"aioseo-modal-body"},$t=["innerHTML"];function St(t,s,o,i,e,n){const k=d("svg-close"),m=d("base-button"),_=d("core-modal");return l(),y(_,{show:o.show,classes:["aioseo-link-assistant-confirmation-modal"],"no-header":"",onClose:s[4]||(s[4]=w=>t.$emit("closeModal",!0))},{body:f(()=>[r("div",yt,[r("button",{class:"close",onClick:s[1]||(s[1]=$(w=>t.$emit("closeModal",!0),["stop"]))},[c(k,{onClick:s[0]||(s[0]=w=>t.$emit("closeModal",!0))})]),r("h3",null,u(n.areYouSure),1),r("div",{class:"reset-description",innerHTML:o.strings.actionCannotBeUndone},null,8,$t),c(m,{type:"blue",size:"medium",onClick:s[2]||(s[2]=w=>t.$emit("doBulkAction",w))},{default:f(()=>[S(u(n.confirmation),1)]),_:1}),c(m,{type:"gray",size:"medium",onClick:s[3]||(s[3]=w=>t.$emit("closeModal",!0))},{default:f(()=>[S(u(o.strings.noChangedMind),1)]),_:1})])]),_:1},8,["show"])}const U=T(Pt,[["render",St]]),At={components:{CoreTooltip:x},props:{phrase:{type:String,required:!0},phraseHtml:{type:String,required:!0},anchor:{type:String,required:!0},url:{type:String,required:!0},tooltip:{type:Boolean,required:!1,default:!0},clickableAnchor:{type:Boolean,default(){return!1}}},computed:{partPattern(){const t=Y.decode(this.anchor),s=I(t);return new RegExp(`(.*)(<t?a[^>]*>.*${s}.*</t?a>)(.*)`,"i")},firstPart(){return Y.decode(this.stripTags(this.getPart(1)).trimStart())},linkAnchor(){return Y.decode(this.stripTags(this.getPart(2)))},lastPart(){return Y.decode(this.stripTags(this.getPart(3)).trimEnd())}},methods:{getPart(t){const o=Y.decode(this.stripTags(this.phraseHtml,!0)).match(this.partPattern);return o?o[t]:""},stripTags(t,s=!1){return t=t.replace(/<br\s?\/?>/gi," "),s?t.replace(/<(?!a\s)(?!\/a)[^>]*>/gi,""):t.replace(/<[^>]*>/gi,"")},maybeOpenLink(){this.clickableAnchor&&window.open(this.url,"_blank").focus()}}},Rt={class:"phrase"},It={key:0,class:"first"},Tt=["href"],Lt={key:2},Ct={class:"anchor"},Bt={key:3,class:"last"};function Mt(t,s,o,i,e,n){const k=d("core-tooltip");return l(),h("div",{class:"aioseo-link-assistant-phrase",onMouseover:s[1]||(s[1]=m=>t.$emit("mouseOver")),onMouseleave:s[2]||(s[2]=m=>t.$emit("mouseLeave"))},[r("span",Rt,[n.firstPart?(l(),h("span",It,u(n.firstPart),1)):g("",!0),o.tooltip?(l(),y(k,{key:1,type:"action"},{tooltip:f(()=>[r("a",{class:"tooltip-url",href:o.url,target:"_blank"},u(o.url),9,Tt)]),default:f(()=>[r("span",{class:"anchor",onClick:s[0]||(s[0]=(...m)=>n.maybeOpenLink&&n.maybeOpenLink(...m))},u(n.linkAnchor),1)]),_:1})):g("",!0),o.tooltip?g("",!0):(l(),h("div",Lt,[r("span",Ct,u(n.linkAnchor),1)])),n.lastPart?(l(),h("span",Bt,u(n.lastPart),1)):g("",!0)]),ct(t.$slots,"icons")],32)}const z=T(At,[["render",Mt]]),Et={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=V();return{settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},components:{CoreTooltip:x,CoreWpTable:q,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:z,SvgLinkExternal:N,SvgTrash:F},mixins:[K,H],data(){return{tableId:"aioseo-post-report-affiliate",linkType:"affiliate",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$tdPro),this.$t.__("Affiliate",this.$tdPro))})}},computed:{columns(){return[{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$tdPro),this.post.links.affiliate.totals.total,this.$t.__("Affiliate",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},Ot={key:0,class:"links-bottom"},Dt={class:"links-bottom-left"},Ht={key:0},xt={class:"links-bottom-right"};function qt(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),_=d("core-tooltip"),w=d("core-wp-table"),b=d("svg-link-external"),P=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(w,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.affiliate.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{phrase:f(({row:p})=>[c(k,{phrase:p.phrase,phraseHtml:p.phrase_html,anchor:p.anchor,url:p.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:p})=>[c(_,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:v=>t.maybeDoBulkAction({action:"delete",selectedRows:p})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",Ot,[r("div",Dt,[t.post.links.affiliate.totals.total>5&&t.postReport?(l(),h("div",Ht,[c(b),r("a",{class:"link-view",href:"#",onClick:s[0]||(s[0]=$(p=>t.openPostReport("affiliate"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",xt,[t.post.links.affiliate.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[1]||(s[1]=$(p=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(P,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[2]||(s[2]=p=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const co=T(Et,[["render",qt]]),Nt={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=V();return{settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},components:{CoreTooltip:x,CoreWpTable:q,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:z,SvgLinkExternal:N,SvgTrash:F},mixins:[K,H],data(){return{tableId:"aioseo-post-report-external",linkType:"external",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$tdPro),this.$t.__("External",this.$tdPro))})}},computed:{columns(){return[{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$tdPro),this.post.links.external.totals.total,this.$t.__("External",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},Ut={key:0,class:"links-bottom"},Yt={class:"links-bottom-left"},Ft={key:0},Vt={class:"links-bottom-right"};function Kt(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),_=d("core-tooltip"),w=d("core-wp-table"),b=d("svg-link-external"),P=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(w,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.external.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{phrase:f(({row:p})=>[c(k,{phrase:p.phrase,phraseHtml:p.phrase_html,anchor:p.anchor,url:p.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:p})=>[c(_,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:v=>t.maybeDoBulkAction({action:"delete",selectedRows:p})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",Ut,[r("div",Yt,[t.post.links.external.totals.total>5&&t.linksReport?(l(),h("div",Ft,[c(b),r("a",{class:"link-view",href:"#",onClick:s[0]||(s[0]=$(p=>t.openPostReport("external"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",Vt,[t.post.links.external.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[1]||(s[1]=$(p=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(P,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[2]||(s[2]=p=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const ko=T(Nt,[["render",Kt]]),zt={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=V();return{rootStore:Q(),settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},emits:["openSuggestions"],components:{CoreTooltip:x,CoreWpTable:q,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:z,SvgLinkExternal:N,SvgLinkSuggestion:tt,SvgTrash:F},mixins:[K,G,H],data(){return{tableId:"aioseo-post-report-inbound-internal",linkType:"inboundInternal",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$td),this.$t.__("Inbound Internal",this.$td)),outboundSuggestions:this.$t.sprintf(this.$t.__("%1$s Link Suggestions",this.$td),this.$t.__("Inbound",this.$td))})}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$td)},{slug:"phrase",label:this.$t.__("Phrase",this.$td)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$td),this.post.links.inboundInternal.totals.total,this.$t.__("Inbound Internal",this.$td))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},Zt={key:0},Wt={key:0,class:"row-actions"},Gt={class:"view"},Jt=["href"],Qt={class:"edit"},Xt=["href"],jt={key:0,class:"links-bottom"},ts={class:"links-bottom-left"},ss={key:1},es={class:"links-bottom-right"};function os(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),_=d("core-tooltip"),w=d("core-wp-table"),b=d("svg-link-suggestion"),P=d("base-button"),p=d("svg-link-external"),v=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(w,{id:e.tableId,key:t.wpTableKey,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,loading:t.wpTableLoading,rows:t.rows,totals:t.post.links.inboundInternal.totals,"bulk-options":i.bulkOptions,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:a})=>{var A,E;return[r("span",null,[S(u(a.context.postTitle)+" ",1),((E=(A=a.context)==null?void 0:A.permalink)==null?void 0:E.replace(/\/$/,""))===i.rootStore.aioseo.urls.home?(l(),h("span",Zt,"("+u(e.strings.frontPage)+")",1)):g("",!0)]),a.context?(l(),h("div",Wt,[r("span",Gt,[r("a",{href:a.context.permalink,target:"_blank"},u(t.viewPost(a.context.postType.singular)),9,Jt),S(" | ")]),r("span",Qt,[r("a",{href:a.context.editLink,target:"_blank"},u(t.editPost(a.context.postType.singular)),9,Xt)])])):g("",!0)]}),phrase:f(({row:a})=>[c(k,{phrase:a.phrase,phraseHtml:a.phrase_html||"",anchor:a.anchor,url:a.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:a})=>[c(_,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:A=>t.maybeDoBulkAction({action:"delete",selectedRows:a})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["id","class","columns","loading","rows","totals","bulk-options","initial-items-per-page","initial-page-number","show-pagination","show-table-footer","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",jt,[r("div",ts,[t.post.links.inboundInternal.rows.length?(l(),y(P,{key:0,type:"blue",tag:"button",onClick:s[0]||(s[0]=a=>t.$emit("openSuggestions"))},{default:f(()=>[c(b),S(" "+u(e.strings.outboundSuggestions),1)]),_:1})):g("",!0),t.post.links.inboundInternal.totals.total>5&&t.linksReport?(l(),h("div",ss,[c(p),r("a",{class:"link-view",href:"#",onClick:s[1]||(s[1]=$(a=>t.openPostReport("inbound-internal"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",es,[t.post.links.inboundInternal.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[2]||(s[2]=$(a=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(v,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[3]||(s[3]=a=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const mo=T(zt,[["render",os]]),ns={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=V();return{rootStore:Q(),settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},emits:["openSuggestions"],components:{CoreTooltip:x,CoreWpTable:q,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:z,SvgLinkExternal:N,SvgLinkSuggestion:tt,SvgTrash:F},mixins:[K,G,H],data(){return{tableId:"aioseo-post-report-outbound-internal",linkType:"outboundInternal",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$tdPro),this.$t.__("Outbound Internal",this.$tdPro)),outboundSuggestions:this.$t.sprintf(this.$t.__("%1$s Link Suggestions",this.$tdPro),this.$t.__("Outbound",this.$tdPro)),openUrl:this.$t.__("Open URL",this.$tdPro)})}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title / URL",this.$tdPro)},{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$tdPro),this.post.links.outboundInternal.totals.total,this.$t.__("Outbound Internal",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},is={key:0},rs={key:0},ls={key:1},as={key:0},ds={key:2,class:"row-actions"},us={class:"view"},ps=["href"],hs={class:"edit"},gs=["href"],cs={key:3,class:"row-actions"},ks={class:"view"},ms=["href"],fs={key:0,class:"links-bottom"},bs={class:"links-bottom-left"},ws={key:1},_s={class:"links-bottom-right"};function vs(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),_=d("core-tooltip"),w=d("core-wp-table"),b=d("svg-link-suggestion"),P=d("base-button"),p=d("svg-link-external"),v=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(w,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.outboundInternal.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:a})=>[a.context&&a.context.postTitle?(l(),h("span",is,[S(u(a.context.postTitle)+" ",1),a.url.replace(/\/$/,"")===i.rootStore.aioseo.urls.home?(l(),h("span",rs,"("+u(e.strings.frontPage)+")",1)):g("",!0)])):g("",!0),!a.context||!a.context.postTitle?(l(),h("span",ls,[S(u(a.url)+" ",1),a.url.replace(/\/$/,"")===i.rootStore.aioseo.urls.home?(l(),h("span",as,"("+u(e.strings.frontPage)+")",1)):g("",!0)])):g("",!0),a.context?(l(),h("div",ds,[r("span",us,[r("a",{href:a.url,target:"_blank"},u(t.viewPost(a.context.postType.singular)),9,ps),S(" | ")]),r("span",hs,[r("a",{href:a.context.editLink,target:"_blank"},u(t.editPost(a.context.postType.singular)),9,gs)])])):g("",!0),a.context?g("",!0):(l(),h("div",cs,[r("span",ks,[r("a",{href:a.url,target:"_blank"},u(e.strings.openUrl),9,ms)])]))]),phrase:f(({row:a})=>[c(k,{phrase:a.phrase,phraseHtml:a.phrase_html,anchor:a.anchor,url:a.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:a})=>[c(_,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:A=>t.maybeDoBulkAction({action:"delete",selectedRows:a})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",fs,[r("div",bs,[t.post.links.outboundInternal.rows.length?(l(),y(P,{key:0,type:"blue",tag:"button",onClick:s[0]||(s[0]=a=>t.$emit("openSuggestions"))},{default:f(()=>[c(b),S(" "+u(e.strings.outboundSuggestions),1)]),_:1})):g("",!0),t.post.links.outboundInternal.totals.total>5&&t.linksReport?(l(),h("div",ws,[c(p),r("a",{class:"link-view",href:"#",onClick:s[1]||(s[1]=$(a=>t.openPostReport("outbound-internal"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",_s,[t.post.links.outboundInternal.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[2]||(s[2]=$(a=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(v,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[3]||(s[3]=a=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const fo=T(ns,[["render",vs]]),Z="aioseo-pro",rt=()=>{const t={addLink:R("Add Link",Z),dismiss:R("Dismiss Suggestion",Z)};return{bulkOptions:[{label:R("Add Link",Z),value:"add"},{label:R("Dismiss",Z),value:"dismiss"}],strings:t}},lt={emits:["updatingLinks","linksUpdated"],mixins:[it],props:{post:{type:Object,required:!0},postIndex:{type:Number,required:!1},postId:{type:Number,required:!1},filteredSuggestionsOutbound:{type:Array,required:!1},postReport:{type:Boolean,default(){return!1}},linksReport:{type:Boolean,default(){return!1}},metabox:{type:Boolean,default(){return!1}}},beforeMount(){window.aioseoBus.$on("updatingLinks",s=>{this.wpTableLoading=s});const t=L();this.pageNumber=this.suggestionType?t.postReport[this.suggestionType].totals.page:1},data(){return{changeItemsPerPageSlug:"linkAssistantPostsReport",editablePhraseKey:0,activeSuggestionRow:-1,action:"",showModal:!1,selectedRows:[]}},computed:{rows(){if(!this.metabox)return this.post.links[this.suggestionType].rows;const t=this.pageNumber===1?0:(this.pageNumber-1)*10;return this.suggestionType==="suggestionsOutbound"?this.filteredSuggestionsOutbound.slice(t,t+10):this.post.links[this.suggestionType].rows.slice(t,t+10)},modalStrings(){return this.action==="add"?{areYouSureSingle:this.$t.__("Are you sure you want to add this suggestion?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to add these suggestions?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to add all suggestions?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to add this suggestion",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to add these suggestions",this.$tdPro),yesAll:this.$t.__("Yes, I want to add all suggestions",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}:{areYouSureSingle:this.$t.__("Are you sure you want to dismiss this suggestion?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to dismiss these suggestions?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to dismiss all suggestions?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to dismiss this suggestion",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to dismiss these suggestions",this.$tdPro),yesAll:this.$t.__("Yes, I want to dismiss all suggestions",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},methods:{fetchData(t){window.aioseoBus.$emit("updatingLinks",!0);const s=M(),o={...t,additionalFilters:{postId:this.post.ID||s.currentPost.id,postIndex:this.postIndex,type:this.suggestionType}},i=L(),e=this.postReport?"fetchPostReport":"fetchLinksReportInner";return i[e](o).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})},toggleShowMorePhrases(t){if(this.activeSuggestionRow===t){this.activeSuggestionRow=-1;return}this.activeSuggestionRow=t},toggleShowMorePostTitles(t){if(this.activeSuggestionRow===t){this.activeSuggestionRow=-1;return}this.activeSuggestionRow=t},openPostReport(t,s){window.location.href=`#/post-report?postId=${this.postId}&postIndex=${this.postIndex}&initialTab=${t}&initialSuggestionTab=${s}`},saveModifiedPhrase(t){let s=null;const o=L();this.linksReport&&(s=o.linksReport.rows[this.postIndex].links[this.suggestionType].rows[t.postIndex]),this.postReport&&(s=o.postReport[this.suggestionType].rows[t.postIndex]),this.metabox&&(s=M().currentPost.linkAssistant.links[this.suggestionType].rows[t.postIndex]),s.suggestions[t.phraseIndex].phrase_html!==t.phraseHtml&&(s.suggestions[t.phraseIndex].phrase=t.phrase,s.suggestions[t.phraseIndex].phrase_html=t.phraseHtml,s.suggestions[t.phraseIndex].anchor=t.anchor)},addLink(t,s){let o=null;if(this.suggestionType==="suggestionsInbound"){const e=`editablePhrase${s}`;o=this.$refs[e].selectedPhrase}if(this.suggestionType==="suggestionsOutbound"&&(o=this.selectedPostTitleIndex),o===!1||typeof o>"u"){console.error("Couldn't determine index of suggestion.");return}if(this.suggestionType==="suggestionsOutbound"){const e=I(t.suggestions[0].context.permalink),n=I(t.suggestions[o].context.permalink),k=new RegExp(`/${e}/`,"i"),m=t.suggestions[0].phrase_html.replace(k,n);t.suggestions[o].phrase_html=m,t.suggestions[o].anchor=t.suggestions[0].anchor}const i=t.suggestions[o];t.suggestions[o]=t.suggestions[0],t.suggestions[0]=i,this.maybeDoBulkAction({action:"add",selectedRows:t})},maybeDoBulkAction({action:t,selectedRows:s}){s===!1||s===void 0||!t||(this.action=t,this.selectedRows=s,this.showModal=!0)},doBulkAction(){if(this.showModal=!1,!this.selectedRows)return;if(this.action==="dismiss"&&typeof this.selectedRows=="number"){this.doDismissSuggestion(this.selectedRows);return}const t=L(),s=M();if(this.selectedRows==="all"){window.aioseoBus.$emit("updatingLinks",!0),t.suggestionsBulk({postIndex:this.postIndex,postId:this.post.ID||s.currentPost.id,action:this.action,suggestionType:this.suggestionType,suggestionRows:"all",linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()});return}let o=null;if(this.linksReport&&(o=t.linksReport.rows[this.postIndex].links[this.suggestionType].rows),this.postReport&&(o=t.postReport[this.suggestionType].rows),this.metabox){if(this.action==="add"&&this.suggestionType!=="suggestionsInbound"){if(window.aioseoBus.$emit("updatingLinks",!0),Array.isArray(this.selectedRows))this.selectedRows.forEach(e=>{this.editorAddSuggestion(e)});else{const e=this.selectedRows;this.editorAddSuggestion(e)}window.aioseoBus.$emit("updatingLinks",!1);return}o=s.currentPost.linkAssistant.links[this.suggestionType].rows}const i=[];Array.isArray(this.selectedRows)?this.selectedRows.forEach(e=>{i.push(o[e])}):i.push(this.selectedRows),window.aioseoBus.$emit("updatingLinks",!0),t.suggestionsBulk({postIndex:this.postIndex,postId:this.post.ID||s.currentPost.id,action:this.action,suggestionType:this.suggestionType,suggestionRows:i,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},doDismissSuggestion(t){window.aioseoBus.$emit("updatingLinks",!0);const s=L(),o=M();s.suggestionDismiss({postIndex:this.postIndex,postId:this.post.ID||o.currentPost.id,suggestionId:t,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},editorAddSuggestion(t){W()&&this.blockEditorAddSuggestion(t),J()&&this.classicEditorAddSuggestion(t)},blockEditorAddSuggestion(t){let s=null,o=null;if(isNaN(t)?this.rows.forEach((P,p)=>{P.suggestions[0].id===t.suggestions[0].id&&(s=P,o=p)}):(o=t,s=this.rows[t]),!s||o===!1)return;window.aioseoBus.$emit("updatingLinks",!0);const i=window.wp.data.select("core/block-editor").getBlocks(),e=s.suggestions[0].original_phrase_html.trim(),n=this.findTargetBlock(i,e);if(!n){window.aioseoBus.$emit("updatingLinks",!1);return}const k=window.wp.data.select("core/block-editor").getBlock(n);if(!k){window.aioseoBus.$emit("updatingLinks",!1);return}const m=I(s.suggestions[0].anchor.trim());let _=new RegExp(`(${m})`,"i");const w=s.suggestions[0].phrase_html.trim(),b=I(e);_=new RegExp(`(${b})`,"i"),window.wp.data.dispatch("core/block-editor").updateBlockAttributes(n,{content:k.attributes.content.replace(_,w)}).then(()=>{this.rows.splice(o,1)}).catch(P=>{console.error("Couldn't add outbound link:",P)}).finally(()=>{L().postSettingsUpdate({postContent:window.wp.data.select("core/editor").getEditedPostContent(),skipNextRun:!0})})},classicEditorAddSuggestion(t){var p;let s=null,o=null;if(isNaN(t)?this.rows.forEach((v,a)=>{v.suggestions[0].id===t.suggestions[0].id&&(s=v,o=a)}):(o=t,s=this.rows[t]),!s||o===!1)return;window.aioseoBus.$emit("updatingLinks",!0);let i="",e=null,n=null;if(document.querySelector("#wp-content-wrap.tmce-active")?(e=window.tinyMCE.get("content"),i=e.getContent({format:"raw"})):(n=document.querySelector("textarea#content"),i=n?n.value:""),!i){window.aioseoBus.$emit("updatingLinks",!1);return}const k=s.suggestions[0].original_phrase_html.trim(),m=I(k),_=I(s.suggestions[0].anchor.trim());let w=new RegExp(`(${_})`,"i");const b=s.suggestions[0].phrase_html.trim();w=new RegExp(`(${m})`,"i"),i=i.replace(w,b),e?e.setContent(i):n.value=i,this.rows.splice(o,1),(p=L().postSettingsUpdate({postContent:i,skipNextRun:!0}))==null||p.finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})}}},Ps={emits:["saveEditor","closeEditor"],components:{BaseEditor:_t},props:{phrase:{type:String,required:!0},url:{type:String,required:!0},context:{type:String,required:!1}},data(){return{strings:{saveChanges:this.$t.__("Save Changes",this.$tdPro),cancel:this.$t.__("Cancel",this.$tdPro),context:this.$t.__("Context",this.$tdPro)}}},mounted(){this.$refs.linkEditor.setPhrase(this.phrase);const t=document.querySelector(".ql-autoLink");t&&(t.innerHTML='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"></line><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"></path><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"></path></svg>',t.classList.add("ql-disabled"))},methods:{getPhrase(){return this.$refs.linkEditor.getPhrase()},getPhraseHtml(){return this.$refs.linkEditor.getPhraseHtml()},getPhraseWithFormats(){return this.$refs.linkEditor.getPhraseWithFormats()},selectionChange({range:t,source:s}){const o=document.querySelector(".ql-autoLink");o&&(!t||!t.length||s!=="user")?o.classList.add("ql-disabled"):o.classList.remove("ql-disabled")}}},ys={class:"aioseo-phrase-editor"},$s={key:0,class:"context"},Ss={class:"context-label"},As=["innerHTML"],Rs={class:"action-buttons"};function Is(t,s,o,i,e,n){const k=d("base-editor"),m=d("base-button");return l(),h("div",ys,[o.context?(l(),h("div",$s,[r("p",null,[r("strong",Ss,u(e.strings.context)+":",1)]),r("p",{innerHTML:o.context},null,8,As)])):g("",!0),c(k,{ref:"linkEditor","auto-link":{url:o.url,phrase:o.phrase},"show-toolbar":"","allow-tags":"","onUpdate:modelValue":s[0]||(s[0]=_=>t.$emit("update:modelValue",_)),onSelectionChange:n.selectionChange},null,8,["auto-link","onSelectionChange"]),r("div",Rs,[c(m,{type:"blue",size:"small",onClick:s[1]||(s[1]=_=>t.$emit("saveEditor"))},{default:f(()=>[S(u(e.strings.saveChanges),1)]),_:1}),c(m,{type:"gray",size:"small",onClick:s[2]||(s[2]=_=>t.$emit("closeEditor"))},{default:f(()=>[S(u(e.strings.cancel),1)]),_:1})])])}const Ts=T(Ps,[["render",Is]]),Ls={emits:["toggleShowMorePhrases","saveModifiedPhrase","delete"],components:{LinkAssistantPhrase:z,LinkAssistantPhraseEditor:Ts,SvgCaret:st,SvgPencil:ft,SvgTrash:F,TransitionSlide:ot},props:{row:{type:Object,required:!0},rowIndex:{type:Number,default:0},activeRow:{type:Number,default:-1},postIndex:{type:Number,required:!1},suggestionType:{type:String,required:!1},selectedPostTitleIndex:{type:Number,required:!1,default(){return 0}},linkSuggestion:{type:Boolean,default(){return!1}},domainsReport:{type:Boolean,default(){return!1}}},data(){return{phraseIndex:-1,showEditor:-1,hoveringOver:-1,selectedPhrase:0}},computed:{phrases(){return this.linkSuggestion?this.row.suggestions.slice(0,10):this.row.links.slice(0,10)},url(){return this.domainsReport?this.phrases[this.phraseIndex].url:this.suggestionType==="suggestionsInbound"?this.row.context.permalink:this.suggestionType==="suggestionsOutbound"?this.row.suggestions[this.selectedPostTitleIndex].context.permalink:""},showingMorePhrases(){return 1<this.phrases.length&&this.activeRow===this.rowIndex},viewMorePhrasesLabel(){const t=1<this.phrases.length?this.phrases.length-1:0;return this.$t.sprintf(this.$t._n("%1$d more phrase","%1$d more phrases",t,this.$tdPro),t)},phraseContext(){let t="",s="";if(this.linkSuggestion){const e=this.row.suggestions[this.phraseIndex];t=e.phrase.trim(),s=e.paragraph.trim()}else{const e=this.row.links[this.phraseIndex];t=e.phrase.trim(),s=e.paragraph.trim()}if(t===s)return"";const o=I(t),i=new RegExp(o,"i");return s.match(i)&&(s=s.replace(i,`<strong>${t}</strong>`)),s}},methods:{tooltipUrl(t,s){return this.domainsReport?s.url:this.suggestionType==="suggestionsInbound"?t.permalink:this.suggestionType==="suggestionsOutbound"&&t.suggestions[this.selectedPostTitleIndex]?t.suggestions[this.selectedPostTitleIndex].context.permalink:""},openEditor(t,s){this.phraseIndex=s,this.showEditor=t},processModifiedPhrase(){this.showEditor=-1,this.hoveringOver=-1;const t=this.$refs.linkEditor.getPhrase(),s=this.$refs.linkEditor.getPhraseHtml(),o=this.$refs.linkEditor.getPhraseWithFormats();let i="";o.ops.forEach(e=>{e.attributes&&e.attributes.link&&(i=i+e.insert)}),i&&this.$emit("saveModifiedPhrase",{phrase:t,phraseHtml:s,anchor:i,postIndex:this.rowIndex,phraseIndex:this.phraseIndex})},deleteLink(t,s,o){t.stopPropagation(),t.preventDefault(),this.$emit("delete",{postIndex:s,linkIndex:o})}}},Cs={class:"aioseo-editable-phrase"},Bs={class:"domains-report-editable-phrase"},Ms={key:0},Es=["checked"],Os={class:"icons"},Ds={key:0,class:"show-more-phrases"},Hs=["onClick"],xs=["checked","onClick"],qs={class:"icons"};function Ns(t,s,o,i,e,n){const k=d("svg-pencil"),m=d("svg-trash"),_=d("link-assistant-phrase"),w=d("svg-caret"),b=d("transition-slide"),P=d("link-assistant-phrase-editor");return l(),h("div",Cs,[r("div",Bs,[e.showEditor!==o.rowIndex?(l(),h("div",Ms,[r("div",{class:"editable-phrase first-phrase",onClick:s[4]||(s[4]=p=>n.openEditor(o.rowIndex,0))},[o.linkSuggestion&&n.showingMorePhrases&&o.suggestionType!=="suggestionsOutbound"?(l(),h("input",{key:0,type:"radio",checked:e.selectedPhrase===0,onClick:s[0]||(s[0]=$(p=>e.selectedPhrase=0,["stop"]))},null,8,Es)):g("",!0),c(_,{url:n.tooltipUrl(o.row,n.phrases[0]),phrase:n.phrases[0].phrase,phraseHtml:n.phrases[0].phrase_html,anchor:n.phrases[0].anchor,class:C({hover:e.hoveringOver===0}),onMouseOver:s[2]||(s[2]=p=>e.hoveringOver=0),onMouseLeave:s[3]||(s[3]=p=>e.hoveringOver=-1)},{icons:f(()=>[r("span",Os,[c(k),o.domainsReport?(l(),y(m,{key:0,onClick:s[1]||(s[1]=p=>n.deleteLink(p,o.rowIndex,0))})):g("",!0)])]),_:1},8,["url","phrase","phraseHtml","anchor","class"])]),o.suggestionType!=="suggestionsOutbound"&&1<n.phrases.length&&e.showEditor!==o.rowIndex?(l(),h("div",Ds,[r("a",{href:"#",onClick:s[5]||(s[5]=$(p=>{t.$emit("toggleShowMorePhrases",o.rowIndex),e.selectedPhrase=0},["prevent"]))},[r("div",null,u(n.viewMorePhrasesLabel),1),c(w,{class:C({rotated:n.showingMorePhrases})},null,8,["class"])])])):g("",!0),c(b,{class:"phrases-list",tag:"div",active:n.showingMorePhrases&&o.suggestionType!=="suggestionsOutbound"},{default:f(()=>[(l(!0),h(X,null,j(n.phrases,(p,v)=>(l(),h("div",{class:"editable-phrase-container",key:v},[v?(l(),h("div",{key:0,class:"editable-phrase selectable-phrase",onClick:a=>n.openEditor(o.rowIndex,v)},[o.linkSuggestion&&n.showingMorePhrases?(l(),h("input",{key:0,type:"radio",checked:v===e.selectedPhrase,onClick:$(a=>e.selectedPhrase=v,["stop"])},null,8,xs)):g("",!0),c(_,{url:n.tooltipUrl(o.row,n.phrases[0]),phrase:p.phrase,phraseHtml:p.phrase_html,anchor:p.anchor,class:C({hover:v===e.hoveringOver}),onMouseOver:a=>e.hoveringOver=v,onMouseLeave:s[6]||(s[6]=a=>e.hoveringOver=-1)},{icons:f(()=>[r("div",qs,[c(k),o.domainsReport?(l(),y(m,{key:0,onClick:a=>n.deleteLink(a,o.rowIndex,v)},null,8,["onClick"])):g("",!0)])]),_:2},1032,["url","phrase","phraseHtml","anchor","class","onMouseOver"])],8,Hs)):g("",!0)]))),128))]),_:1},8,["active"])])):g("",!0),e.showEditor===o.rowIndex?(l(),y(P,{key:1,ref:"linkEditor",modelValue:n.phrases[this.phraseIndex].phrase,phrase:n.phrases[this.phraseIndex].phrase_html,url:n.url,context:n.phraseContext,onSaveEditor:n.processModifiedPhrase,onCloseEditor:s[7]||(s[7]=p=>{e.showEditor=-1,e.hoveringOver=-1})},null,8,["modelValue","phrase","url","context","onSaveEditor"])):g("",!0)])])}const at=T(Ls,[["render",Ns]]),Us={},Ys={viewBox:"0.1 0.43 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-cornerstone-content"},Fs=r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor",d:"M2.31673 12.0587V6.40873H3.53342V12.0587H2.31673ZM6.46312 12.0587V6.40873H7.67038V12.0587H6.46312ZM0.0979004 14.1624V12.842H13.9117V14.1624H0.0979004ZM10.4667 12.0587V6.40873H11.6834V12.0587H10.4667ZM0.0979004 5.62542V4.3464L7.00008 0.43335L13.9117 4.3464V5.62542H0.0979004ZM2.93417 4.29568H11.066L7.00008 1.95077L2.93417 4.29568Z"},null,-1),Vs=[Fs];function Ks(t,s){return l(),h("svg",Ys,Vs)}const zs=T(Us,[["render",Ks]]),Zs={components:{CoreTooltip:x,SvgCornerstoneContent:zs},data(){return{strings:{description:this.$t.sprintf(this.$t.__("Cornerstone content refers to the most important and informative articles or pages on your website that serve as the foundation for your content strategy. AIOSEO uses cornerstone content for internal linking recommendations in Link Assistant. %1$s",this.$tdPro),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"cornerstoneContent",!0))}}}},Ws=["innerHTML"];function Gs(t,s,o,i,e,n){const k=d("svg-cornerstone-content"),m=d("core-tooltip");return l(),y(m,{class:"aioseo-cornerstone-content-tooltip"},{tooltip:f(()=>[r("span",{innerHTML:e.strings.description},null,8,Ws)]),default:f(()=>[c(k)]),_:1})}const dt=T(Zs,[["render",Gs]]),Js={setup(){const{strings:t,bulkOptions:s}=rt();return{settingsStore:D(),composableStrings:t,bulkOptions:s}},components:{CoreAlert:et,CoreWpTable:q,LinkAssistantConfirmationModal:U,LinkAssistantEditablePhrase:at,SvgCirclePlus:nt,SvgLinkExternal:N,CornerstoneContentTooltip:dt},mixins:[G,lt,H],data(){return{tableId:"aioseo-post-report-inbound-suggestions",suggestionType:"suggestionsInbound",isPostPublished:!1,strings:O(this.composableStrings,{dismissAllSuggestions:this.$t.sprintf(this.$t.__("Dismiss All %1$s Suggestions",this.$tdPro),this.$t.__("Inbound Internal",this.$tdPro)),noSuggestions:this.$t.sprintf(this.$t.__("You currently don't have any %1$s Suggestions!",this.$tdPro),this.$t.__("Inbound Internal",this.$tdPro)),unpublishedPost:this.$t.__("This post has not been published yet. You must publish the post before inbound link suggestions can be generated.",this.$tdPro)})}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro)},{slug:"spacer",width:"30px"},{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"add_link",width:"150px"}]},seeAllSuggestions(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Suggestions",this.$tdPro),this.post.links.suggestionsInbound.totals.total,this.$t.__("Inbound Internal",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}},beforeMount(){if(this.post.isPostEditor){const t=vt();this.isPostPublished=t&&t==="publish"}}},Qs={class:"aioseo-link-suggestions-Inbound"},Xs=["href"],js={class:"row-actions"},te={class:"view"},se=["href"],ee={class:"edit"},oe=["href"],ne={class:"dismiss"},ie=["onClick"],re=["onClick"],le={key:1,class:"links-bottom"},ae={class:"links-bottom-left"},de={key:0},ue={class:"links-bottom-right"};function pe(t,s,o,i,e,n){var v,a;const k=d("core-alert"),m=d("cornerstone-content-tooltip"),_=d("link-assistant-editable-phrase"),w=d("svg-circle-plus"),b=d("core-wp-table"),P=d("svg-link-external"),p=d("link-assistant-confirmation-modal");return l(),h("div",Qs,[t.post.post_status&&((v=t.post)==null?void 0:v.post_status)!=="publish"||(a=t.post)!=null&&a.isPostEditor&&!e.isPostPublished?(l(),y(k,{key:0,class:"unpublished-post-alert",type:"yellow"},{default:f(()=>[r("span",null,u(e.strings.unpublishedPost),1)]),_:1})):g("",!0),(l(),y(b,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.suggestionsInbound.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:A})=>[r("strong",null,[r("a",{class:"edit-link",href:A.context.permalink,target:"_blank"},u(A.context.postTitle),9,Xs),A.context.isCornerstoneContent?(l(),y(m,{key:0})):g("",!0)]),r("div",js,[r("span",te,[r("a",{href:A.context.permalink,target:"_blank"},u(t.viewPost(A.context.postType.singular)),9,se),S(" | ")]),r("span",ee,[r("a",{href:A.context.editLink,target:"_blank"},u(t.editPost(A.context.postType.singular)),9,oe),S(" | ")]),r("span",ne,[r("a",{href:"#",onClick:$(E=>t.maybeDoBulkAction({action:"dismiss",selectedRows:A}),["prevent"])},u(e.strings.dismiss),9,ie)])])]),phrase:f(({row:A,index:E})=>[c(_,{ref:"editablePhrase"+E,row:A,rowIndex:E,activeRow:t.activeSuggestionRow,postIndex:t.postIndex,suggestionType:e.suggestionType,linkSuggestion:"",onHidePhrases:s[0]||(s[0]=ut=>{t.activeSuggestionRow=-1}),onToggleShowMorePhrases:t.toggleShowMorePhrases,onSaveModifiedPhrase:t.saveModifiedPhrase},null,8,["row","rowIndex","activeRow","postIndex","suggestionType","onToggleShowMorePhrases","onSaveModifiedPhrase"])]),add_link:f(({row:A,index:E})=>[r("div",{class:"add-link",onClick:$(ut=>t.addLink(A,E),["prevent"])},[c(w),r("a",null,u(e.strings.addLink),1)],8,re)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",le,[r("div",ae,[t.post.links.suggestionsInbound.totals.total>5&&t.linksReport?(l(),h("div",de,[c(P),r("a",{class:"link-view",href:"#",onClick:s[1]||(s[1]=$(A=>t.openPostReport("link-suggestions","suggestions-inbound"),["prevent"]))},u(n.seeAllSuggestions),1)])):g("",!0)]),r("div",ue,[t.post.links.suggestionsInbound.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[2]||(s[2]=$(A=>t.maybeDoBulkAction({action:"dismiss",selectedRows:"all"}),["prevent"]))},u(e.strings.dismissAllSuggestions),1)):g("",!0)])])),c(p,{show:t.showModal,strings:t.modalStrings,selectedRows:t.selectedRows,onCloseModal:s[3]||(s[3]=A=>t.showModal=!1),onDoBulkAction:t.doBulkAction},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const he=T(Js,[["render",pe]]),ge={emits:["toggleShowMorePhrases","postTitleIndexChanged"],components:{SvgCaret:st,TransitionSlide:ot,CornerstoneContentTooltip:dt},mixins:[G],props:{row:{type:Object,required:!0},rowIndex:{type:Number,default:0},activeRow:{type:Number,default:-1},postIndex:{type:Number,required:!1},suggestionType:{type:String,required:!1}},data(){return{selectedPostTitleIndex:-1,hoveringOver:-1}},computed:{postTitles(){const t=[];return this.row.suggestions.forEach(s=>{t.includes[s.context.postTitle]||t.push(s.context.postTitle)}),t.slice(0,10)},showingMorePostTitles(){return 1<this.postTitles.length&&this.activeRow===this.rowIndex},viewMorePostTitlesLabel(){const t=1<this.postTitles.length?this.postTitles.length-1:0;return this.$t.sprintf(this.$t._n("%1$d more post","%1$d more posts",t,this.$tdPro),t)}},methods:{selectDifferentPostTitle(t){this.selectedPostTitleIndex!==t&&(this.selectedPostTitleIndex=t,this.$emit("postTitleIndexChanged",t))}}},ce={class:"aioseo-post-title-selector"},ke=["checked"],me={class:"post-title-text"},fe={class:"view"},be=["href"],we={class:"edit"},_e=["href"],ve={key:0,class:"show-more-post-titles"},Pe=["onMouseover"],ye=["checked","onClick"],$e={class:"post-title-text"},Se={class:"view"},Ae=["href"],Re={class:"edit"},Ie=["href"];function Te(t,s,o,i,e,n){const k=d("cornerstone-content-tooltip"),m=d("svg-caret"),_=d("transition-slide");return l(),h("div",ce,[r("div",{class:"post-title first-post-title",onMouseover:s[1]||(s[1]=w=>e.hoveringOver=0),onMouseleave:s[2]||(s[2]=w=>e.hoveringOver=-1)},[n.showingMorePostTitles?(l(),h("input",{key:0,type:"radio",checked:e.selectedPostTitleIndex===0,onClick:s[0]||(s[0]=$(w=>n.selectDifferentPostTitle(0),["stop"]))},null,8,ke)):g("",!0),r("span",me,[S(u(n.postTitles[0])+" ",1),o.row.suggestions[0].context.isCornerstoneContent?(l(),y(k,{key:0})):g("",!0)]),r("div",{class:C(["row-actions",{hover:e.hoveringOver===0}])},[r("span",fe,[r("a",{href:o.row.suggestions[0].context.permalink,target:"_blank"},u(t.viewPost(o.row.suggestions[0].context.postType.singular)),9,be),S(" | ")]),r("span",we,[r("a",{href:o.row.suggestions[0].context.editLink,target:"_blank"},u(t.editPost(o.row.suggestions[0].context.postType.singular)),9,_e)])],2)],32),1<n.postTitles.length?(l(),h("div",ve,[r("a",{href:"#",onClick:s[3]||(s[3]=$(w=>{t.$emit("toggleShowMorePhrases",o.rowIndex),n.selectDifferentPostTitle(0)},["prevent"]))},[r("div",null,u(n.viewMorePostTitlesLabel),1),c(m,{class:C({rotated:n.showingMorePostTitles})},null,8,["class"])])])):g("",!0),c(_,{class:"post-titles-list",tag:"div",active:n.showingMorePostTitles},{default:f(()=>[(l(!0),h(X,null,j(n.postTitles,(w,b)=>(l(),h("div",{class:"post-title post-title-container",key:b},[b?(l(),h("div",{key:0,class:"selectable-post-title",onMouseover:P=>e.hoveringOver=b,onMouseleave:s[4]||(s[4]=P=>e.hoveringOver=-1)},[n.showingMorePostTitles?(l(),h("input",{key:0,type:"radio",checked:b===e.selectedPostTitleIndex,onClick:$(P=>n.selectDifferentPostTitle(b),["stop"])},null,8,ye)):g("",!0),r("span",$e,[S(u(n.postTitles[b])+" ",1),o.row.suggestions[b].context.isCornerstoneContent?(l(),y(k,{key:0})):g("",!0)]),r("div",{class:C(["row-actions",{hover:b===e.hoveringOver}])},[r("span",Se,[r("a",{href:o.row.suggestions[b].context.permalink,target:"_blank"},u(t.viewPost(o.row.suggestions[b].context.postType.singular)),9,Ae),S(" | ")]),r("span",Re,[r("a",{href:o.row.suggestions[b].context.editLink,target:"_blank"},u(t.editPost(o.row.suggestions[b].context.postType.singular)),9,Ie)])],2)],40,Pe)):g("",!0)]))),128))]),_:1},8,["active"])])}const Le=T(ge,[["render",Te]]),Ce={setup(){const{strings:t,bulkOptions:s}=rt();return{settingsStore:D(),composableStrings:t,bulkOptions:s}},components:{CoreWpTable:q,LinkAssistantConfirmationModal:U,LinkAssistantEditablePhrase:at,LinkAssistantPostTitleSelector:Le,SvgCirclePlus:nt,SvgLinkExternal:N},mixins:[lt,H],data(){return{tableId:"aioseo-post-report-outbound-suggestions",suggestionType:"suggestionsOutbound",selectedPostTitleIndex:0,strings:O(this.composableStrings,{dismissAllSuggestions:this.$t.sprintf(this.$t.__("Dismiss All %1$s Suggestions",this.$tdPro),this.$t.__("Outbound Internal",this.$tdPro)),noSuggestions:this.$t.sprintf(this.$t.__("You currently don't have any %1$s Suggestions!",this.$tdPro),this.$t.__("Outbound Internal",this.$tdPro))})}},computed:{columns(){return[{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"spacer",width:"30px"},{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro)},{slug:"add_link",width:"150px"}]},seeAllSuggestions(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Suggestions",this.$tdPro),this.post.links.suggestionsOutbound.totals.total,this.$t.__("Outbound Internal",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},Be={class:"aioseo-link-suggestions-outbound"},Me={class:"row-actions"},Ee={class:"dismiss"},Oe=["onClick"],De=["onClick"],He={key:0,class:"links-bottom"},xe={class:"links-bottom-left"},qe={key:0},Ne={class:"links-bottom-right"};function Ue(t,s,o,i,e,n){const k=d("link-assistant-post-title-selector"),m=d("link-assistant-editable-phrase"),_=d("svg-circle-plus"),w=d("core-wp-table"),b=d("svg-link-external"),P=d("link-assistant-confirmation-modal");return l(),h("div",Be,[(l(),y(w,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.suggestionsOutbound.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:p,index:v})=>[c(k,{ref:"postTitleSelector"+v,row:p,rowIndex:v,activeRow:t.activeSuggestionRow,postIndex:t.postIndex,suggestionType:e.suggestionType,linkSuggestion:"",onHidePhrases:s[0]||(s[0]=a=>{t.activeSuggestionRow=-1}),onToggleShowMorePhrases:t.toggleShowMorePhrases,onSaveModifiedPhrase:t.saveModifiedPhrase,onPostTitleIndexChanged:s[1]||(s[1]=a=>e.selectedPostTitleIndex=a)},null,8,["row","rowIndex","activeRow","postIndex","suggestionType","onToggleShowMorePhrases","onSaveModifiedPhrase"])]),phrase:f(({row:p,index:v})=>[c(m,{row:p,rowIndex:v,activeRow:t.activeSuggestionRow,postIndex:t.postIndex,suggestionType:e.suggestionType,selectedPostTitleIndex:e.selectedPostTitleIndex,linkSuggestion:"",onHidePhrases:s[2]||(s[2]=a=>{t.activeSuggestionRow=-1}),onSaveModifiedPhrase:t.saveModifiedPhrase},null,8,["row","rowIndex","activeRow","postIndex","suggestionType","selectedPostTitleIndex","onSaveModifiedPhrase"]),r("div",Me,[r("span",Ee,[r("a",{href:"#",onClick:$(a=>t.maybeDoBulkAction({action:"dismiss",selectedRows:p}),["prevent"])},u(e.strings.dismiss),9,Oe)])])]),add_link:f(({row:p,index:v})=>[r("div",{class:"add-link",onClick:$(a=>t.addLink(p,v),["prevent"])},[c(_),r("a",null,u(e.strings.addLink),1)],8,De)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",He,[r("div",xe,[t.post.links.suggestionsOutbound.totals.total>5&&t.linksReport?(l(),h("div",qe,[c(b),r("a",{class:"link-view",href:"#",onClick:s[3]||(s[3]=$(p=>t.openPostReport("link-suggestions","suggestions-outbound"),["prevent"]))},u(n.seeAllSuggestions),1)])):g("",!0)]),r("div",Ne,[t.filteredSuggestionsOutbound.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[4]||(s[4]=$(p=>t.maybeDoBulkAction({action:"dismiss",selectedRows:"all"}),["prevent"]))},u(e.strings.dismissAllSuggestions),1)):g("",!0)])])),c(P,{show:t.showModal,strings:t.modalStrings,selectedRows:t.selectedRows,onCloseModal:s[5]||(s[5]=p=>t.showModal=!1),onDoBulkAction:t.doBulkAction},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const Ye=T(Ce,[["render",Ue]]),Fe={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=V();return{linkAssistantStore:L(),bulkOptions:o,modalStrings:s,composableStrings:t}},emits:["linksUpdated","suggestionsTabChanged"],components:{CoreAlert:et,CoreMainTabs:bt,Inbound:he,Outbound:Ye,SvgLinkInternalInbound:ht,SvgLinkInternalOutbound:gt},mixins:[K],props:{filteredSuggestionsOutbound:{type:Array,required:!0},initialTab:{type:String,required:!1},showAlert:{type:Boolean,default(){return!1}}},data(){return{tabsKey:0,activeTab:"suggestions-inbound",strings:O(this.composableStrings,{description:this.$t.sprintf(this.$t.__("Below you can add inbound and outbound internal links based on %1$s's smart suggestions. These suggestions are generated in the background, which requires some time to complete. %2$s",this.$tdPro),"AIOSEO",this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"linkAssistant",!0))})}},computed:{tabs(){return[{slug:"suggestions-inbound",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.metabox||this.postReport?this.post.links.suggestionsInbound.totals.total:this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsInbound,this.$t.__("Inbound Internal Suggestions",this.$tdPro))},{slug:"suggestions-outbound",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.metabox||this.postReport?this.filteredSuggestionsOutbound.length:this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsOutbound,this.$t.__("Outbound Internal Suggestions",this.$tdPro))}]}},methods:{processChangeTab(t){this.activeTab=t,this.$emit("suggestionsTabChanged",t)},dismissAlert(){this.linkAssistantStore.internalOptions.internal.dismissedAlerts.suggestions=!0,pt.get(this.$links.restUrl("link-assistant/data/dismiss-alert")).catch(t=>console.error("Could not dismiss suggestions alert:",t))}},beforeMount(){this.initialTab&&(this.activeTab=this.initialTab),this.linkAssistantStore.setLinksReportCounts()}},Ve={class:"aioseo-link-suggestions"},Ke=["innerHTML"],ze={class:"link-suggestions-container"};function Ze(t,s,o,i,e,n){const k=d("core-alert"),m=d("core-main-tabs"),_=d("outbound"),w=d("inbound");return l(),h("div",Ve,[i.linkAssistantStore.internalOptions.internal.dismissedAlerts.suggestions?g("",!0):(l(),y(k,{key:0,class:"description",type:"blue","show-close":"",onCloseAlert:n.dismissAlert},{default:f(()=>[r("span",{innerHTML:e.strings.description},null,8,Ke)]),_:1},8,["onCloseAlert"])),(l(),y(m,{internal:"",key:e.tabsKey,tabs:n.tabs,active:e.activeTab,showSaveButton:!1,onChanged:n.processChangeTab},{"var-tab-icon":f(({tab:b})=>[(l(),y(kt(b.icon),{class:C([{warning:b.warning}])},null,8,["class"]))]),_:1},8,["tabs","active","onChanged"])),r("div",ze,[e.activeTab==="suggestions-outbound"?(l(),y(_,{key:0,post:t.post,postIndex:t.postIndex,postId:t.postId,filteredSuggestionsOutbound:o.filteredSuggestionsOutbound,linksReport:t.linksReport,postReport:t.postReport,metabox:t.metabox,onLinksUpdated:s[0]||(s[0]=b=>{e.tabsKey++,t.$emit("linksUpdated")})},null,8,["post","postIndex","postId","filteredSuggestionsOutbound","linksReport","postReport","metabox"])):g("",!0),e.activeTab==="suggestions-inbound"?(l(),y(w,{key:1,post:t.post,postIndex:t.postIndex,postId:t.postId,linksReport:t.linksReport,postReport:t.postReport,metabox:t.metabox,onLinksUpdated:s[1]||(s[1]=b=>{e.tabsKey++,t.$emit("linksUpdated")})},null,8,["post","postIndex","postId","linksReport","postReport","metabox"])):g("",!0)])])}const bo=T(Fe,[["render",Ze]]);export{U as L,go as S,at as a,co as b,ko as c,mo as d,fo as e,bo as f,vt as g};
