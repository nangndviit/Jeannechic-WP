"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(u){var f,h,n,b=u(window),a={},g=[],v=[],m=null,s="_open",y="_close",_=[],k=null,l=/(iPad|iPhone|iPod)/.test(navigator.userAgent),w={_init:function(t){var o=u(t),e=o.data("popupoptions");v[t.id]=!1,g[t.id]=0,o.data("popup-initialized")||(o.attr("data-popup-initialized","true"),w._initonce(t)),e.autoopen&&setTimeout(function(){w.show(t,0)},0)},_initonce:function(e){var t,o,i=u(e),n=u("body"),a=i.data("popupoptions"),p=(m=parseInt(n.css("margin-right"),10),k=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,a.scrolllock&&void 0===f&&(o=(p=u('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),f=o.innerWidth()-o.height(99).innerWidth(),p.remove()),i.attr("id")||i.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),i.addClass("popup_content"),a.background&&!u("#"+e.id+"_background").length&&(n.append('<div id="'+e.id+'_background" class="popup_background"></div>'),(t=u("#"+e.id+"_background")).css({opacity:0,visibility:"hidden",backgroundColor:a.color,position:"fixed",top:0,right:0,bottom:0,left:0}),a.setzindex&&!a.autozindex&&t.css("z-index","100000"),a.transition&&t.css("transition",a.transition)),n.append(e),i.wrap('<div id="'+e.id+'_wrapper" class="popup_wrapper" />'),(o=u("#"+e.id+"_wrapper")).css({opacity:0,visibility:"hidden",position:"absolute"}),l&&((t=u("#"+e.id+"_background")).css("cursor","pointer"),u(a.pagecontainer).css("cursor","pointer")),"overlay"==a.type&&!a.absolute&&a.background&&(o.css("overflow","auto"),o[0].style.WebkitOverflowScrolling="touch"),i.css({opacity:0,visibility:"hidden","pointer-events":"auto",display:"inline-block"}),a.setzindex&&!a.autozindex&&o.css("z-index","100001"),a.outline||i.css("outline","none"),a.transition&&(i.css("transition",a.transition),o.css("transition",a.transition)),i.attr("aria-hidden",!0),"overlay"==a.type&&(i.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),o.css({position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"}),o.append('<div class="popup_align" />'),u(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),i.attr("role","dialog"),a.openelement||"."+e.id+s);u(p).each(function(t,o){u(o).attr("data-popup-ordinal",t),o.id||u(o).attr("id","open_"+parseInt(1e8*Math.random(),10))}),i.attr("aria-labelledby")||i.attr("aria-label")||i.attr("aria-labelledby",u(p).attr("id")),"hover"==a.action?(a.keepfocus=!1,u(p).on("mouseenter",function(){w.show(e,u(this).data("popup-ordinal"))}),u(p).on("mouseleave",function(){w.hide(e)})):u(document).on("click.jqp",p,function(t){t.preventDefault();var o=u(this).data("popup-ordinal");setTimeout(function(){w.show(e,o)},0)}),a.closebutton&&w.addclosebutton(e),a.detach?i.detach():i.hide()},show:function(t,o){var e=u(t);if(!e.data("popup-visible")){e.data("popup-initialized")||w._init(t),e.attr("data-popup-initialized","true");var i=u("body"),n=e.data("popupoptions"),a=u("#"+t.id+"_wrapper"),p=u("#"+t.id+"_background");if(x(t,o,n.beforeopen),v[t.id]=o,setTimeout(function(){_.push(t.id)},0),n.autozindex){for(var s=document.getElementsByTagName("*"),l=s.length,d=0,r=0;r<l;r++){var c=u(s[r]).css("z-index");"auto"!==c&&d<(c=parseInt(c,10))&&(d=c)}g[t.id]=d,n.background&&0<=g[t.id]&&u("#"+t.id+"_background").css({zIndex:g[t.id]+1}),0<=g[t.id]&&a.css({zIndex:g[t.id]+2})}n.detach&&a.prepend(t),e.show(),h=setTimeout(function(){a.css({visibility:"visible",opacity:1}),u("html").addClass("popup_visible").addClass("popup_visible_"+t.id),a.addClass("popup_wrapper_visible")},20),n.scrolllock&&(i.css("overflow","hidden"),i.height()>b.height()&&i.css("margin-right",m+f)),e.css({visibility:"visible",opacity:1}),n.background&&(p.css({visibility:"visible",opacity:n.opacity}),setTimeout(function(){p.css({opacity:n.opacity})},0)),e.data("popup-visible",!0),w.reposition(t,o),e.data("focusedelementbeforepopup",document.activeElement),e.attr("tabindex",-1),setTimeout(function(){"closebutton"===n.focuselement?u("#"+t.id+" ."+t.id+y+":first").focus():n.focuselement?u(n.focuselement).focus():!0!==n.focuselement&&!n.keepfocus||e.focus()},n.focusdelay),n.keepfocus&&u(n.pagecontainer).attr("aria-hidden",!0),e.attr("aria-hidden",!1),x(t,o,n.onopen),k?a.one("transitionend",function(){x(t,o,n.opentransitionend)}):x(t,o,n.opentransitionend),"tooltip"==n.type&&u(window).on("resize."+t.id,function(){w.reposition(t,o)})}},hide:function(t,o){var e,i,n,a,p,s=u.inArray(t.id,_);-1!==s&&(h&&clearTimeout(h),e=u("body"),i=u(t),n=i.data("popupoptions"),a=u("#"+t.id+"_wrapper"),p=u("#"+t.id+"_background"),i.data("popup-visible",!1),1===_.length?u("html").removeClass("popup_visible").removeClass("popup_visible_"+t.id):u("html").hasClass("popup_visible_"+t.id)&&u("html").removeClass("popup_visible_"+t.id),_.splice(s,1),a.hasClass("popup_wrapper_visible")&&a.removeClass("popup_wrapper_visible"),n.keepfocus&&!o&&setTimeout(function(){u(i.data("focusedelementbeforepopup")).is(":visible")&&i.data("focusedelementbeforepopup").focus()},0),a.css({visibility:"hidden",opacity:0}),i.css({visibility:"hidden",opacity:0}),n.background&&p.css({visibility:"hidden",opacity:0}),u(n.pagecontainer).attr("aria-hidden",!1),i.attr("aria-hidden",!0),x(t,v[t.id],n.onclose),k&&"0s"!==i.css("transition-duration")?i.one("transitionend",function(){i.data("popup-visible")||(n.detach?i.detach():i.hide()),n.scrolllock&&setTimeout(function(){u.grep(_,function(t){return u("#"+t).data("popupoptions").scrolllock}).length||e.css({overflow:"visible","margin-right":m})},10),x(t,v[t.id],n.closetransitionend)}):(n.detach?i.detach():i.hide(),n.scrolllock&&setTimeout(function(){u.grep(_,function(t){return u("#"+t).data("popupoptions").scrolllock}).length||e.css({overflow:"visible","margin-right":m})},10),x(t,v[t.id],n.closetransitionend)),"tooltip"==n.type&&u(window).off("resize."+t.id))},toggle:function(t,o){u(t).data("popup-visible")?w.hide(t):setTimeout(function(){w.show(t,o)},0)},reposition:function(t,o){var e,i=u(t),n=i.data("popupoptions"),a=u("#"+t.id+"_wrapper");o=o||0,"tooltip"==n.type?(a.css({position:"absolute"}),e=(o=n.tooltipanchor?u(n.tooltipanchor):n.openelement?u(n.openelement).filter('[data-popup-ordinal="'+o+'"]'):u("."+t.id+s+'[data-popup-ordinal="'+o+'"]')).offset()||{left:0,top:0},"right"==n.horizontal?a.css("left",e.left+o.outerWidth()+n.offsetleft):"leftedge"==n.horizontal?a.css("left",e.left+n.offsetleft):"left"==n.horizontal?a.css("right",b.width()-e.left-n.offsetleft):"rightedge"==n.horizontal?a.css("right",b.width()-e.left-o.outerWidth()-n.offsetleft):a.css("left",e.left+o.outerWidth()/2-i.outerWidth()/2-parseFloat(i.css("marginLeft"))+n.offsetleft),"bottom"==n.vertical?a.css("top",e.top+o.outerHeight()+n.offsettop):"bottomedge"==n.vertical?a.css("top",e.top+o.outerHeight()-i.outerHeight()+n.offsettop):"top"==n.vertical?a.css("bottom",b.height()-e.top-n.offsettop):"topedge"==n.vertical?a.css("bottom",b.height()-e.top-i.outerHeight()-n.offsettop):a.css("top",e.top+o.outerHeight()/2-i.outerHeight()/2-parseFloat(i.css("marginTop"))+n.offsettop)):"overlay"==n.type&&(n.horizontal?a.css("text-align",n.horizontal):a.css("text-align","center"),n.vertical?i.css("vertical-align",n.vertical):i.css("vertical-align","middle"),n.absolute&&a.css({position:"absolute",top:window.scrollY}),n.background||(a.css({"pointer-events":"none"}),n.absolute||p(t)||(i.css("overflow","auto"),i[0].style.WebkitOverflowScrolling="touch",i.css("max-height","calc(100% - "+i.css("margin-top")+" - "+i.css("margin-bottom")+")"))))},addclosebutton:function(t){var o=u(t).data("popupoptions").closebuttonmarkup?u(a.closebuttonmarkup).addClass(t.id+"_close"):'<button class="popup_close '+t.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">Ã—</span></button>';u(t).data("popup-initialized")&&u(t).append(o)}},x=function(t,o,e){var i=u(t).data("popupoptions");void 0!==i&&(i=i.openelement||"."+t.id+s,i=u(i+'[data-popup-ordinal="'+o+'"]'),"function"==typeof e&&e.call(u(t),t,i))},p=function(t){t=t.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)};u(document).on("keydown",function(t){var o;_.length&&(o=_[_.length-1],o=document.getElementById(o),u(o).data("popupoptions").escape&&27==t.keyCode&&w.hide(o))}),u(document).on("mousedown",function(t){n=t.target}),u(document).on("click",function(t){var o,e,i;_.length&&(o=_[_.length-1],e=document.getElementById(o),i=u(e).data("popupoptions")&&u(e).data("popupoptions").closeelement?u(e).data("popupoptions").closeelement:"."+e.id+y,u(t.target).closest(i).length&&(t.preventDefault(),w.hide(e)),u(e).data("popupoptions")&&u(e).data("popupoptions").blur&&!u(t.target).closest(u(e).data("popupoptions").blurignore).length&&!u(t.target).closest("#"+o).length&&!u(n).closest("#"+o).length&&2!==t.which&&u(t.target).is(":visible")&&(u(e).data("popupoptions").background?(w.hide(e),t.preventDefault()):w.hide(e,!0)))}),u(document).on("keydown",function(t){var o,e,i,n;_.length&&9==t.which&&(o=_[_.length-1],o=document.getElementById(o),u(o).data("popupoptions").keepfocus&&(e=u(o).find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),n=u(":focus"),i=e.length,n=e.index(n),0===i?(u(o).focus(),t.preventDefault()):t.shiftKey?0===n&&(e.get(i-1).focus(),t.preventDefault()):n==i-1&&(e.get(0).focus(),t.preventDefault())))}),u.fn.popup=function(i){return this.each(function(){var t,o=u(this),e=u.extend(!0,{},u.fn.popup.defaults);i&&"tooltip"===i.type&&(e.background=!1),"object"===_typeof(i)?(t=u.extend({},e,o.data("popupoptions"),i),o.data("popupoptions",t),a=o.data("popupoptions"),w._init(this)):"string"==typeof i?(o.data("popupoptions")||(o.data("popupoptions",e),a=o.data("popupoptions")),w[i].call(this,this)):(o.data("popupoptions")||(o.data("popupoptions",e),a=o.data("popupoptions")),w._init(this))})},u.fn.popup.destroyall=function(){for(var t=0;t<_.length;t++)u("#"+_[t]).popup("hide");u(".popup_wrapper").remove(),u(".popup_background").remove(),u(document).off("click.jqp")},u.fn.popup.defaults={type:"overlay",absolute:!1,autoopen:!1,background:!0,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,blurignore:null,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}(jQuery);